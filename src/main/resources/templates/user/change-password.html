<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" class="scroll-smooth dark"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	lang="en">

<head th:replace="~{/fragments/_layout.html :: head}">
</head>

<body>
	</div>
	<div class="app overflow-hidden">
		<!-- Arrow up -->
		<aside th:replace="~{/fragments/_layout.html :: arrow-up}"></aside>
		<!-- Header -->
		<header th:replace="~{/fragments/user_layout.html :: header}">
		</header>

		<nav th:replace="~{/fragments/user_layout.html :: navbar}"></nav>

		<!-- Main content -->
		<main class="mb-4">
			<!-- changle form -->
			<div
				class="py-[100px] mobile:px-[20px] min-h-screen bg-gradient-to-tr from-white to-yellow-100">
				<div class="grids wide bg-white rounded-lg h-[50%] shadow-md">
					<div class="row">
						<div class="col l-4 md-12 c-12">
							<img class="h-full w-full mobile:hidden"
								src="https://play-lh.googleusercontent.com/VAY0Hdd9w2VKOgXvv11KB9XzZmbuKmzI7jqD1RSJtQepd3vXM9wpUUO0YUHBJ9u_yxA"
								alt="">
						</div>
						<div class="col l-8 md-12 c-12">
							<form th:object="${changePassword}" method="post" th:action="@{/change-password}" id="fChangePassword"
								class="mobile:p-5 pc:p-32 tablet:p-5">
								<h2 class="font-semibold text-[24px] text-center">Đổi mật
									khẩu</h2>
								<div class=" form-group row m-[24px_0px]">
									<label class="col l-4 md-12 c-12 tablet:pb-2 mobile:pb-2"
										for="oldPassword">Mật khẩu cũ</label> <input th:field="*{oldPassword}"
										name="oldPassword" placeholder="Vui lòng nhập mật khẩu cũ..."
										class="focus-visible:outline-primary-color bg-yellow-100 w-[280px] h-[32px] p-5 col l-8 md-12 c-12"
										type="password" id="oldPassword"> <span
										class="error-message col l-o-4 text-red-600"></span>
								</div>
								<div class=" form-group row m-[24px_0px]">
									<label class="col l-4 md-12 c-12 tablet:pb-2 mobile:pb-2"
										for="newPassword">Mật khẩu mới</label> <input th:field="*{newPassword}"
										name="newPassword" placeholder="Vui lòng nhập mật khẩu mới..."
										class="focus-visible:outline-primary-color bg-yellow-100 w-[280px] h-[32px] p-5 col l-8 md-12 c-12"
										type="password" id="newPassword"> <span
										class="error-message col l-o-4 text-red-600"></span>
								</div>

								<div class=" form-group row m-[24px_0px]">
									<label class="col l-4 md-12 c-12 tablet:pb-2 mobile:pb-2"
										for="reNewPassword">Nhập lại mật khẩu mới</label> <input th:field="*{confirmNewPassword}"
										name="reNewPassword"
										placeholder="Vui lòng nhập lại mật khẩu..."
										class="focus-visible:outline-primary-color bg-yellow-100 w-[280px] h-[32px] p-5 col l-8 md-12 c-12"
										type="password" id="reNewPassword"> <span
										class="error-message col l-o-4 text-red-600"></span>
								</div>

								<button type="submit"
									class="button mb-4 tablet:w-full mobile:w-full float-right btn-primary">
									Đổi mật khẩu</button>
								<!-- Btn khi đang submit -->
								<button type="button" style="display: none;"
									class="loading mb-4 tablet:w-full mobile:w-full w-50 h-50 float-right items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-yellow-400 transition ease-in-out duration-150 cursor-not-allowed"
									disabled="">
									<svg class="animate-spin h-5 w-5 text-white"
										xmlns="http://www.w3.org/2000/svg" fill="none"
										viewBox="0 0 24 24">
                                  <circle class="opacity-25" cx="12"
											cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                  <path class="opacity-75"
											fill="currentColor"
											d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>

								</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</main>


		<!-- Footer -->
		<footer th:replace="~{/fragments/user_layout.html :: footer}">
		</footer>
	</div>

	<!-- Load các hàm xử ly flash message -->
	<script th:replace="~{/fragments/_layout.html :: script-flash-message}"></script>

	<!-- Load các hàm khởi tạo để tạo rich text -->
	<script th:replace="~{/fragments/_layout.html :: script-rich-text}"></script>
	<script>
		window.addEventListener("DOMContentLoaded", () => {
			options = {
			rules : {
				'newPassword' : [ 'required', 'max:30' ],
				'confirmNewPassword' : [ 'required', 'max:30', 'match:newPassword' ],
				'oldPassword' : [ 'required' ]
			},
			messages : {
				'required' : 'Vui lòng nhập trường này!',
				'max:30' : 'Mật khẩu quá dài (nhỏ hơn 30 kí tự)!',
				'match:newPassword' : 'Mật khẩu không khớp!'
			},
			isCallAPI : false,
		}
		validator('#fChangePassword', options);
		})
	</script>
</body>

</html>